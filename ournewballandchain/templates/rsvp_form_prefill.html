{% extends "base.html" %}
{% block title %}RSVP{% endblock %}

{% block head %}
{{ super() }}
{% endblock %}

{% block content %}


<h3>Hello, {{ invite.name }}!</h3>

{% if form.errors %}
    <ul class="errors">
        {% for field_name, field_errors in form.errors|dictsort if field_errors %}
            {% for error in field_errors %}
                <li>{{ form[field_name].label }}: {{ error }}</li>
            {% endfor %}
        {% endfor %}
    </ul>
{% endif %}

<form method="POST">
    {{ form.csrf_token}}
    <div class="control-group">
        {{ form.email.label(class_="control-label") }} 
        <div class="controls">{{ form.email }}</div>
    </div>

    <div class="control-group">
        {{ form.attending.label(class_="control-label") }} 
        <div class="controls">{{ form.attending }}</div>
    </div>

    <div id="guests-field" style="display: none">
        <div class="control-group">
            {{ form.guests.label(class_="control-label") }} 
            <div class="controls">{{ form.guests(min=0, max=10) }}</div>
        </div>

        <div class="control-group">
            {{ form.guest_names.label(class_="control-label") }} 
            <div class="controls">{{ form.guest_names }}</div>
        </div>
    </div>

    <div class="control-group">
        {{ form.note.label(class_="control-label") }} 
        <div class="controls">{{ form.note }}</div>
    </div>

    <div class="control-group">
        <div class="controls">
            <input type="submit">
        </div>
    </div>
    <p><input type="submit">
</form>


{% endblock %}

{% block extra_script %}
<script>
    $('#attending').change(function() {

        if(this.checked) {
            $('#guests-field').css('visibility', 'visible')
        } else {
            $('#guests-field').css('visibility', 'hidden')
        }
    });
</script>
{% endblock %}